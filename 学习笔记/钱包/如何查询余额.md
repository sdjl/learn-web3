# 如何查询余额

## 技术栈

- **Wagmi**: React Hooks 库，提供 `useBalance` Hook 查询余额
- **Viem**: 以太坊工具库，提供 `formatEther` 函数格式化余额显示

## 实现概览

- 用 **Wagmi** 的 `useBalance` Hook 查询指定地址的余额
- 用 **Wagmi** 的 `useBalance` Hook 返回的 `refetch` 函数手动刷新余额
- 用 **Viem** 的 `formatEther` 函数将 BigInt 类型的 wei 转换为可读的 ETH 字符串

## 核心实现详情

### 1. 基本查询余额

```typescript
import { useAccount, useBalance } from "wagmi";
import { formatEther } from "viem";

export function WalletConnection() {
  // 获取钱包地址
  const { address } = useAccount();
  // 查询余额，返回的数据包含 value（BigInt 类型，单位为 wei）
  const { data: balanceData } = useBalance({ address });

  return (
    <p>
      {/* formatEther 将 wei 转换为 ETH 字符串 */}
      余额: {formatEther(balanceData?.value || 0n)}
    </p>
  );
}
```

### 2. 手动刷新余额

```typescript
import { useAccount, useBalance } from "wagmi";

export function WalletActions() {
  const { address } = useAccount();
  // 获取 refetch 函数用于手动刷新余额
  const { refetch } = useBalance({ address });

  return (
    <button onClick={() => refetch()}>
      {/* 点击按钮时重新获取余额 */}
      重新获取余额
    </button>
  );
}
```
